{% extends 'base.html' %}
{% load static %}
{% block scripts %}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/materialize.min.css' %}">
{% endblock %}
{% block content %}
<input id="jobtitle_input" value="{{ jobtitle }}" type='hidden'/>
<input id="company_input" value="{{ company }}" type='hidden'/>
<input id="joblisting_input" value="{{ joblisting }}" type='hidden'/>
<div class="center container-lg">
    {% if object %}
    <h2 class="text-center title">
        Edit <span class="txt-bold">{{object.company}}</span>
    </h2>
    {% else %}
    <h2 class="text-center title">Add Application</h2>
    {% endif %}
    <form class="form center" enctype="multipart/form-data" action="/applications/create/" method="post">
        {% csrf_token %}
        {{ application_form.as_p }}
            <input type="file" name="resume-file">
            <br>
            <br>
        <div class="flex">
            <input
                class="btn txt-medium btn-lg forced-margin"
                type="submit"
                value="Submit"
            />
            <button class="btn txt-medium btn-lg forced-margin">
                <a href='{% url "application" %}'>Cancel</a>
            </button>
        </div>
    </form>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
<script>
$(document).ready(function(){
    $('#id_jobtitle').val($('#jobtitle_input').val())
    $('#id_company').val($('#company_input').val())
    $('#id_joblisting').val($('#joblisting_input').val())
    const dueDate = $('#id_dueDate')
    M.Datepicker.init(dueDate, {
        format: 'yyyy-mm-dd',
        setDefaultDate: false,
        autoClose: true
    }); 
})
$(document).ready(function(){
    const appDate = $('#id_applicationDate')
    M.Datepicker.init(appDate, {
        format: 'yyyy-mm-dd',
        setDefaultDate: false,
        autoClose: true
    });
})
</script>
{% endblock %}